# T-016: Update All SMS/Email Callers

| Field | Value |
|-------|-------|
| **Status** | ðŸ”´ BLOCKED |
| **Round** | 3 |
| **Blocked By** | T-015 âœ… |
| **Effort** | 4-6 hours |
| **Assignee** | _____________ |

---

## Background

After T-015 updates `sendSms` to require `companyId`, all callers need to be updated to pass it.

---

## Files to Update

Every file that calls `sendSms()` or `sendEmail()`:

1. `src/do/ThreadDO.ts` - AI responses
2. `src/do/SchedulerDO.ts` - Scheduled messages
3. `src/worker/routes/messages.ts` - Manual sends
4. `src/worker/lib/escalation.ts` - Escalation notifications

---

## Pattern

```typescript
// BEFORE
await sendSms(env, { to, body, from: configuredNumber });

// AFTER
await sendSms(env, { to, body, companyId, preferredFrom: configuredNumber });
```

---

## Acceptance Criteria

- [ ] All sendSms callers pass companyId
- [ ] All sendEmail callers pass companyId
- [ ] No TypeScript errors
- [ ] All send paths tested

---

## Definition of Done

- [ ] Code reviewed
- [ ] All callers updated
- [ ] End-to-end tests pass
- [ ] PR merged

name = "comms-centre"
main = "src/worker/index.ts"
compatibility_date = "2024-12-18"
compatibility_flags = ["nodejs_compat"]

# Durable Objects
[[durable_objects.bindings]]
name = "THREAD_DO"
class_name = "ThreadDO"

[[durable_objects.bindings]]
name = "SCHEDULER_DO"
class_name = "SchedulerDO"

[[durable_objects.bindings]]
name = "CONFIG_DO"
class_name = "ConfigDO"

# Durable Object migrations (SQLite-backed)
[[migrations]]
tag = "v1"
new_sqlite_classes = ["ThreadDO", "SchedulerDO", "ConfigDO"]

# KV Namespace
[[kv_namespaces]]
binding = "KV"
id = "33d3fbab19b040dea42fa3f32fd6d7f6"

# Environment variables (set via wrangler secret or dashboard)
[vars]
ENVIRONMENT = "development"

# Production-only secrets (set via `wrangler secret put`)
# DATABASE_URL = "..."
# TWILIO_ACCOUNT_SID = "..."
# TWILIO_AUTH_TOKEN = "..."
# OPENROUTER_API_KEY = "..."
# TELEGRAM_BOT_TOKEN = "..."
# TELEGRAM_CHAT_ID = "..."
# JWT_SECRET = "..."
# GMAIL_CLIENT_ID = "..."
# GMAIL_CLIENT_SECRET = "..."
# GMAIL_REFRESH_TOKEN = "..."
# GMAIL_FROM_ADDRESS = "..."
pages_build_output_dir = "admin-ui/dist"
